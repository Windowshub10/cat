#MailServer

Install sendmail and its Dependencies

The sendmail package requires another package called procmail. You must install procmail first.

Bash
rpm -ivh /media/RHEL*/Packages/procmail*
rpm -ivh /media/RHEL*/Packages/sendmail*

Configure Sendmail to Listen on the Network

By default, sendmail only listens for connections from the local machine itself (127.0.0.1). We need to change this so it can accept mail from other computers.

Open the macro configuration file:

Bash
gedit /etc/mail/sendmail.mc

Find the line that looks like this (around line 53):
DAEMON_OPTIONS(\Port=smtp, Addr=127.0.0.1, Name=MTA')dnl`

Comment out this line by adding dnl to the very beginning of it. dnl stands for "delete to new line" and is the comment character for this type of file.

dnl DAEMON_OPTIONS(`Port=smtp, Addr=127.0.0.1, Name=MTA')dnl
Save the file and close the editor.

Generate the New Configuration File

The sendmail.mc file is just a template. You must run the m4 macro processor to convert your changes into the real configuration file that sendmail actually uses (sendmail.cf).

Bash
m4 /etc/mail/sendmail.mc > /etc/mail/sendmail.c

## Part 2: DNS Configuration (MX Record)
For a mail server to work properly, the DNS server needs a special MX (Mail Exchanger) record. This record tells other mail servers where to deliver email for your domain.

Edit Your DNS Forward Zone File

Bash
gedit /var/named/forward.zone

Add the MX Record

Add the following two lines to the end of the file. This tells the world that the mail server for tyit.com is server.tyit.com.

tyit.com.       IN  MX  10  server.tyit.com.

Save and close the file.

## Part 3: Restarting Services and Testing
Now we'll restart the services, create a test user, and send a test email.

Restart Services

Restart both the DNS service and the sendmail service to apply all your changes.

Bash
service named restart
service sendmail restart

Create a Test User

Bash
useradd mailuser
passwd mailuser

Follow the prompts to set a password for mailuser.

Send a Test Email

Use the mail command to send an email to your new user.

Bash
mail mailuser@server.tyit.com

The terminal will then prompt you for the following:

Subject:: Type a subject (e.g., Test Email) and press Enter.

Body: Type a short message and press Enter.

Press Ctrl+D to send the email.

Check for the Email

Log in as the new user.

Bash
su - mailuser

Run the mail command to open the mailbox.

type 1

